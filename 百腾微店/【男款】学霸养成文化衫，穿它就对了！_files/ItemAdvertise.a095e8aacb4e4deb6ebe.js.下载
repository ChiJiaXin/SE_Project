(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"3EVK":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showGoodStuff&&(t.primeItemListLeft.length||t.primeItemListRight.length)?i("div",{staticClass:"r-container",attrs:{"data-spider":"recommend_wrap"}},[t.showGoodStuff&&(t.primeItemListLeft.length||t.primeItemListRight.length)&&t.goodStuffTitle?i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:""+t.recommandTitle,expression:"`${recommandTitle}`"}],staticClass:"r-title prime bg-pic",attrs:{"perf-ignore":""}}):t._e(),t._v(" "),t.showGoodStuff&&(t.primeItemListLeft.length||t.primeItemListRight.length)?i("div",{staticClass:"r-list-water-falls"},[i("ul",{ref:"leftList",staticClass:"r-list-left"},t._l(t.primeItemListLeft,(function(e,a){return i("recommend-item-water-falls",{key:a,attrs:{idx:a,positon:"left",data:e,spoor:t.spoor,itemId:t.itemId,type:"prime",showClose:!0},on:{deleteItem:t.deleteItem}})}))),t._v(" "),i("ul",{ref:"rightList",staticClass:"r-list-right"},t._l(t.primeItemListRight,(function(e,a){return i("recommend-item-water-falls",{key:a,attrs:{idx:a,positon:"right",data:e,spoor:t.spoor,itemId:t.itemId,type:"prime",showClose:!0},on:{deleteItem:t.deleteItem}})})))]):t._e()]):t._e()},s=[];a._withStripped=!0,i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}))},"40PM":function(t,e,i){},"8Nz4":function(t,e,i){"use strict";var a=i("gw9r");i.n(a).a},WA1X:function(t,e,i){"use strict";var a=i("40PM");i.n(a).a},WuXu:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"RecommendItemWaterFalls",data:function(){return{parentNode:null}},props:{data:{type:Object},spoor:{type:String},itemId:{type:String},type:{String:String},showClose:{type:Boolean},idx:{type:Number},positon:{type:String}},computed:{imageUrl:function(){return this.$_utils.setImg(this.data.imageUrl,750,750,!0)},promotionTags:function(){return this.data.promotionTags&&this.data.promotionTags.length?this.data.promotionTags.slice(0,3):null},userRelation:function(){var t="";return this.data.promotionTags&&this.data.promotionTags.forEach((function(e){"user_relation"!==e.name||(t=e.data)})),t}},methods:{closeItem:function(t){var e=t.target;this.parentNode=e.parentNode,this.parentNode.querySelector(".delete-btn").style.display="block",this.parentNode.querySelector(".delete-wrap").style.display="block"},deleteWrapCli:function(t){t.preventDefault(),this.parentNode.querySelector(".delete-btn").style.display="none",this.parentNode.querySelector(".delete-wrap").style.display="none"},deleteHandle:function(t,e,i){this.parentNode.querySelector(".delete-btn").style.display="none",this.parentNode.querySelector(".delete-wrap").style.display="none";var a={itemId:t,idx:e,positon:i};this.$emit("deleteItem",a)}}},t.exports=e.default},gw9r:function(t,e,i){},hcVB:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o(i("7K07")),s=o(i("wRRh")),n=i("J5Nv"),r=o(i("17Gp"));function o(t){return t&&t.__esModule?t:{default:t}}function d(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}e.default={name:"ItemAdvertise",components:{"recommend-item-water-falls":s.default},data:function(){return{page:1,list:[],recommandInfo:[],recommandTitle:"https://si.geilicdn.com/img-15eb000001689d6efab00a217252_750_150.jpg",primeItemListLeft:[],primeItemListRight:[],listLeftHeight:0,listRightHeight:0,listOffset:0,showIndicators:!1,hasMore:!0,isLoading:!1,spoor:"",itemId:"",limit:""}},props:["shopId","showGoodStuff","goodStuffTitle","flag","needPage","source","isTencentLiveEnv"],created:function(){var t=this;window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,i){i=i||window;for(var a=0;a<t.length;a++)e.call(i,t[a],a,t)})},computed:{DOMAIN_SHOP:function(){return"//weidian.com"},DOMAIN_ITEM:function(){return"//weidian.com"}},mounted:function(){window.itemId&&(r.default.regWDSellerAPP()||(this.needPage&&Number(this.needPage)||(this.limit=12),this.scroll(),this.fetchPrimeItemsData()))},methods:{go2shop:function(){this.isTencentLiveEnv||(window.location.href=this.DOMAIN_SHOP+"/?userid="+this.shopId)},setImg:function(t){var e,i=t.split("?")[0],a=/.*?w=(\d*)&h=(\d*)/.exec(t),s=0;return a?(e=a[1],s=a[2],Number(e)>Number(s)?e/s>2&&(i+="?w=345&h=165&cp=1",s=165):Number(e)<Number(s)&&s/e>2&&(i+="?w=345&h=750&cp=1",s=750),{url:i,h:s}):{url:t,h:370}},deleteItem:function(t){var e=this,i=t.idx,s=t.positon,r={businessId:277,requestParams:{itemId:t.itemId}};n.Store.getRecommandData(r).then((function(t){if(t&&t.status&&0==t.status.code){(0,a.default)({content:"将减少此类推荐"});var n=[],r=[];"left"===s?(e.primeItemListLeft.splice(i,1),n=e.primeItemListLeft.splice(i,e.primeItemListLeft.length-i),r=e.primeItemListRight.splice(i,e.primeItemListRight.length-i)):(e.primeItemListRight.splice(i,1),n=e.primeItemListLeft.splice(i+1,e.primeItemListLeft.length-i-1),r=e.primeItemListRight.splice(i,e.primeItemListRight.length-i)),e.primeItemListLeft=[].concat(d(e.primeItemListLeft),d(r)),e.primeItemListRight=[].concat(d(e.primeItemListRight),d(n))}}))},bottomOfWindow:function(){return i=0,a=0,document.body&&(i=document.body.scrollTop),document.documentElement&&(a=document.documentElement.scrollTop),(i-a>0?i:a)+("CSS1Compat"==document.compatMode?document.documentElement.clientHeight:document.body.clientHeight)>=(t=0,e=0,document.body&&(t=document.body.scrollHeight),document.documentElement&&(e=document.documentElement.scrollHeight),(t-e>0?t:e)-50);var t,e,i,a},fetchPrimeItemsData:function(){var t=this,e={limit:this.limit||8,source:this.source,page:this.page++,queryMarket:!0,queryShopFeatures:!0,queryCpn:!1,params:{itemId:window.itemId,sellerId:this.shopId},dataType:4};n.Store.guessULike(e).then((function(e){if(e&&e.status&&0==e.status.code){var i=e.result,a=t;window.innerWidth;t.hasMore=i&&!i.lastPage;var s=i.items||[],n=i.dataType;i.styleInfo&&i.styleInfo.titleBackground&&(t.recommandTitle=i.styleInfo.titleBackground),s&&s.forEach((function(t,e){var i=a.setImg(t.itemMainPic);t.itemTitle=t.itemName,t.imageUrl=i.url,t.promotionPrice=t.itemPrice,t.price=t.itemOriginalPrice,t.promotionTags=t.tagList,t.adsk?t.itemUrl="https://h5.weidian.com/m/weidian/transfer-cpc.html?itemId="+t.itemId+"&adsk="+t.adsk:t.itemUrl="https://weidian.com/item.html?itemID="+t.itemId,t.dataType=n,e%2==0?(a.primeItemListLeft=[].concat(d(a.primeItemListLeft),[t]),a.listLeftHeight+=1*i.h):(a.primeItemListRight=[].concat(d(a.primeItemListRight),[t]),a.listRightHeight+=1*i.h)}))}t.isLoading=!1}))},scroll:function(){var t=this;window.addEventListener("scroll",this.debounce((function(){var e=document.querySelectorAll(".delete-btn"),i=document.querySelectorAll(".delete-wrap");e.forEach((function(t){"none"!=t.style.display&&(t.style.display="none")})),i.forEach((function(t){"none"!=t.style.display&&(t.style.display="none")})),t.bottomOfWindow()&&!t.isLoading&&t.hasMore&&t.needPage&&Number(t.needPage)&&(t.isLoading=!0,t.fetchPrimeItemsData())}),10))},debounce:function(t,e){var i=null;return function(){var a=this,s=arguments;clearTimeout(i),i=setTimeout((function(){t.apply(a,s)}),e)}}}},t.exports=e.default},pN4W:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"r-recommend",attrs:{"data-spider":"recommend_item"}},[t.showClose&&1!=t.data.viewType?i("span",{staticClass:"close-item",attrs:{"data-spider-action-name":"dislike_show_click"},on:{click:t.closeItem}}):t._e(),t._v(" "),t.showClose&&1!=t.data.viewType?i("span",{staticClass:"delete-btn",attrs:{"data-spider-action-name":"dislike_type","data-spider-action-args":JSON.stringify({itemId:t.data.itemId})},on:{click:function(e){t.deleteHandle(t.data.itemId,t.idx,t.positon)}}},[t._v("不喜欢")]):t._e(),t._v(" "),t.data?i("a",{attrs:{href:t.data.itemUrl,"data-spider-impression":"","data-spider-action-args":JSON.stringify({itemId:t.data.itemId,shopId:t.data.sellerId,spoor:t.data.spoor,adsk:t.data.adsk,ads_item:t.data.adIcon,view_type:t.data.viewType,dataType:t.data.dataType}),"data-spider-action-name":1==t.data.viewType?"to_union":"to_item"}},[t.showClose&&1!=t.data.viewType?i("div",{staticClass:"delete-wrap",attrs:{"data-spider-action-name":"dislike_wrap_click","data-spider-impression":""},on:{click:t.deleteWrapCli}}):t._e(),t._v(" "),i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.data.imageUrl,expression:"data.imageUrl"}],staticClass:"r-cover"}),t._v(" "),t.data.viewType&&1==t.data.viewType?i("div",{staticClass:"union-wrap",attrs:{href:t.data.unionUrl}},[i("div",{staticClass:"union-content"},[t.data&&t.data.unionType?i("span",{staticClass:"union-type"},[t._v("\n        "+t._s(t.data.unionType)+"\n        ")]):t._e(),t._v(" "),t.data&&t.data.unionRecReason?i("span",{staticClass:"union-des"},[t._v("\n          "+t._s(t.data.unionRecReason)+"\n        ")]):t._e(),t._v(" "),t.data&&t.data.unionBtnName?i("span",{staticClass:"union-btn"},[t._v("\n          "+t._s(t.data.unionBtnName)+"\n        ")]):t._e()])]):i("div",{staticClass:"r-detail"},[t.data.topTag&&t.data.topTag.data?i("img",{staticClass:"medal-icon",attrs:{src:t.data.topTag.data}}):t._e(),t._v(" "),t.data.adIcon?i("span",{staticClass:"ads-icon"},[t._v("广告")]):t._e(),t._v(" "),i("div",{staticClass:"r-d-title g-vt line1"},[t._v(t._s(t.data.itemTitle))]),t._v(" "),t.promotionTags?i("div",{staticClass:"r-d-tags"},[i("div",{staticClass:"r-d-tags-box"},t._l(t.promotionTags,(function(e,a){return i("div",{key:a,staticClass:"r-d-tags-box-wrap"},[0==e.showType&&e.data&&"user_relation"!==e.name?i("span",{staticClass:"r-d-promotion-tags"},[i("em",[t._v(t._s(e.data))])]):t._e(),t._v(" "),1==e.showType&&e.data?i("img",{staticClass:"r-d-shop-tags",attrs:{src:e.data}}):t._e()])})))]):t._e(),t._v(" "),i("div",{staticClass:"r-d-price",class:{"has-ads":t.data.adIcon}},[i("div",{staticClass:"r-d-price-wrap"},[i("em",[t._v("￥"+t._s(t.data.promotionPrice!=t.data.price?1*t.data.promotionPrice/100:t.data.isPointItem?1*t.data.itemPointPrice/100+"+"+t.data.itemPoint+"积分":1*t.data.price/100)+" ")]),t._v(" "),t.data.monPay?i("em",{staticClass:"r-d-price-instalments"},[t._v("￥"+t._s(1*t.data.monPay/100)+"x"+t._s(t.data.numOfInstalments)+"期")]):t._e()])]),t._v(" "),t.userRelation?i("div",{staticClass:"r-d-relation"},[t._v(t._s(t.userRelation))]):t._e()])]):t._e()])},s=[];a._withStripped=!0,i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}))},r4ZB:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("hcVB");Object.keys(a).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})}));var s,n=(s=a)&&s.__esModule?s:{default:s};e.default=n.default,t.exports=e.default},ttpj:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("WuXu");Object.keys(a).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})}));var s,n=(s=a)&&s.__esModule?s:{default:s};e.default=n.default,t.exports=e.default},wRRh:function(t,e,i){"use strict";i.r(e);var a=i("pN4W"),s=i("ttpj"),n=i.n(s);for(var r in s)"default"!==r&&function(t){i.d(e,t,(function(){return s[t]}))}(r);i("8Nz4");var o=i("KHd+"),d=Object(o.a)(n.a,a.a,a.b,!1,null,"74e113ee",null);d.options.__file="workspace/ad42cd3b520458f53cf062341eb221ac/itemServerMixed_prod/src/components/Recommend/ItemWaterFalls.vue",e.default=d.exports},ySLj:function(t,e,i){"use strict";i.r(e);var a=i("3EVK"),s=i("r4ZB"),n=i.n(s);for(var r in s)"default"!==r&&function(t){i.d(e,t,(function(){return s[t]}))}(r);i("WA1X");var o=i("KHd+"),d=Object(o.a)(n.a,a.a,a.b,!1,null,"1f90539d",null);d.options.__file="workspace/ad42cd3b520458f53cf062341eb221ac/itemServerMixed_prod/src/components/Recommend/Advertise.vue",e.default=d.exports}}]);