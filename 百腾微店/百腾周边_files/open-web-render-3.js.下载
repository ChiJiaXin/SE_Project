(window.openRenderLibJsonp=window.openRenderLibJsonp||[]).push([[3],{102:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetItemsForBuyer=function(e,t,i){(0,o.ThorMin)("/wditem/itemCate.getItemsForBuyer/1.0",r(e),function(e){t(s(e))},i,"get",!0)},t.GetItemsForBuyerOriginal=function(e,t,i){var n=e.shopId,r=e.cateId,a=e.limitStart,d=e.limitNum,f=e.fxOffset,c=e.wdOffset;(0,o.ThorMin)("/wditem/itemCate.getItemsForBuyer/1.0",{userID:n,cate_id:r,limitStart:a,limitNum:d,fx_offset:f,wd_offset:c,include_fx:1,need_tag:1},function(e){t(s(e))},i,"get",!0)},t.GetEmptyCateItems=function(e,t,i){(0,o.ThorMin)("/wditem/itemCate.getEmptyCateItems/1.0",r(e),function(e){t(s(e))},i,"get",!0)},t.SearchEmptyCateItems=function(e,t,i){(0,o.ThorMin)("/wditem/itemCate.searchEmptyCateItems/1.0",r(e),function(e){t(s(e))},i,"get",!0)};var o=i(62),n=i(56),r=function(e){var t=e.shopId,i=e.cateId,o=e.pageNum,r=e.pageSize,s=void 0===r?n.MAX_ITEM_NUM:r;return{userID:t,cate_id:i,limitStart:o*s,limitNum:s,fx_offset:e.fxOffset,wd_offset:e.wdOffset,include_fx:1,need_tag:1}},s=function(e){return{items:e.items||e||[],offset:{fxOffset:e.offset&&e.offset.fxOffset,wdOffset:e.offset&&e.offset.wdOffset}}}},127:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetMixItems=function(e,t,i){var n=e.ids;(0,o.ThorMin)("/wditem/itemList.getMixItems/1.0",{item_ids:n,need_tag:1},function(e){e.forEach(function(e){e.id=e.item_i_d}),t(e)},i,"get",!0)};var o=i(62)},128:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetIsTopList=function(e,t,i){var r=e.shopId,s=e.supplyShopId,a=e.pageNum,d=e.pageSize,f=void 0===d?n.MAX_ITEM_NUM:d;(0,o.ThorMin)("/wditem/itemList.getIsTopList/1.0",{userid:r,pageNum:a,pageSize:f,retailShopId:r,supplyShopId:s,isTop:1,need_tag:1},t,i,"get",!0)};var o=i(62),n=i(56)},129:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetShopTopList=function(e,t,i){var r=e.shopId,s=e.supplyShopId,a=e.pageNum,d=e.pageSize,f=void 0===d?n.MAX_ITEM_NUM:d;(0,o.ThorMin)("/decorate/decorate.getShopTopList/1.0",{param:{retailShopId:r,supplyShopId:s,pageNum:a,pageSize:f}},t,i,"get",!0)};var o=i(62),n=i(56)},356:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,n=i(90),r=(o=n)&&o.__esModule?o:{default:o},s=i(102),a=i(127),d=i(128),f=i(129),c=i(56);var u=c.Error.NetworkErrorMessage,m=window.API,l=m.env,p=m.Bus,g=m.Echo,h=m.historyBack,I=m.sessionController,_=l.get;t.default={data:function(){return{defaultImg:c.IMG.placeholder,loading:c.IMG.loading,shopId:_("shopId"),shopType:_("shopType"),supplyShopId:_("supplyShopId"),pageNum:0,limitStart:0,fxOffset:0,wdOffset:0,url:"",allItemId:[],itemLoading:!1,nextPage:null,cacheHistory:h&&h.isTargetBrowser,SessionStorageName:"comLib-item-"+(this.model.id||0)+"-"+(this.model.cate_id||0)}},created:function(){if("rt"===this.env){var e=this,t=e.model,i=t.recommend,o=t.cate_id,n=t.page_size,r=!1;if(e.cacheHistory){var s=I.getItem(e.SessionStorageName);s&&s.content&&s.content.length&&(e.model.content=s.content,e.pageNum=s.pageNum,e.limitStart=s.limitStart,e.fxOffset=s.fxOffset,e.wdOffset=s.wdOffset,e.model.hasMore=s.hasMore,e.allItemId=s.allItemId&&s.allItemId.split(",")||[],r=!0)}if(1===Number(i))e.nextPage=function(){e.getRecommendItems(e.pageNum)},r||(e.model.content=[],e.nextPage());else if(0===o||o)e.nextPage=function(t){e.getCategoryItems(o,e.limitStart,parseInt(t)||void 0)},r||(e.model.content=[],e.nextPage(parseInt(n)||20));else{e.nextPage=function(){var t=50*e.pageNum,i=t+50;e.getMixItemsByIds(e.allItemId.slice(t,i),function(){e.model.hasMore=i<e.allItemId.length-1})},r||(e.allItemId=e.model.content&&e.model.content.reduce(function(e,t){return t&&t.id&&e.push(t.id),e},[]),e.model.content=[],e.nextPage())}}},methods:{getMixItemsByIds:function(e,t,i){var o=this;if(!e||!e.length)return o.itemLoading=!1,t();(0,a.GetMixItems)({ids:e.join(",")},function(e){o.itemLoading=!1,e&&e.length&&(o.model.content=o.model.content.concat(e.filter(function(e){return 1===e.status})),o.$nextTick(g.render),t instanceof Function&&t())},o.networkErrorHandler)},getCategoryItems:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.MAX_ITEM_NUM;if(void 0===e)return!1;var o=this,n=o.shopId,r=o.fxOffset,a=o.wdOffset,d=o.networkErrorHandler,f={shopId:n,cateId:e,limitStart:t,limitNum:i,fxOffset:r,wdOffset:a};(0,s.GetItemsForBuyerOriginal)(f,function(e){o.itemLoading=!1,o.limitStart+=i,o.model.hasMore=e.items.length===i,o.fxOffset=e.offset.fxOffset,o.wdOffset=e.offset.wdOffset,o.model.content=o.model.content.concat(e.items),o.$nextTick(function(){g.render(),o.updateSessionStorage()})},d)},getRecommendItems:function(){var e=this,t=e.shopType,i=e.shopId,o=e.supplyShopId,n=e.pageNum,r=e.networkErrorHandler;(t?f.GetShopTopList:d.GetIsTopList)({shopId:i,supplyShopId:o,pageNum:n},function(t){t.items&&(t=t.items),e.itemLoading=!1,e.model.hasMore=0!==t.length&&t.length%c.MAX_ITEM_NUM==0,e.model.content=e.model.content.concat(t),e.$nextTick(function(){g.render(),e.updateSessionStorage()})},r)},loadMoreItems:function(){this.pageNum++,this.itemLoading=!0,this.model.hasMore=!0,this.nextPage instanceof Function&&this.nextPage()},getItemLink:function(e){return r.default.getItemLink(e.id)},networkErrorHandler:function(){this.itemLoading=!1,this.pageNum?(this.pageNum--,this.model.hasMore=!1,p.emit("showToast",{content:u})):this.model.content=[]},updateSessionStorage:function(){if(this.cacheHistory){var e=this.SessionStorageName,t=this.model,i=this.pageNum,o=this.fxOffset,n=this.wdOffset;I.setItem(e,{content:t.content,pageNum:i,fxOffset:o,wdOffset:n,hasMore:t.hasMore?"1":"",allItemId:t.allItemId})}}}}},359:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,n=i(71),r=(o=n)&&o.__esModule?o:{default:o};t.findItemsFromTemplate=function(e){if(e&&e.nodes){var t=!0,i=!1,o=void 0;try{for(var n,s=(0,r.default)(e.nodes);!(t=(n=s.next()).done);t=!0){var a=n.value;if("list"===a.type)return a.nodes}}catch(e){i=!0,o=e}finally{try{!t&&s.return&&s.return()}finally{if(i)throw o}}}return[]}},73:function(e,t,i){"use strict";function o(e){return e?String(parseFloat(e)):""}function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0];return e.forEach(function(e){var t=parseFloat(e);0===i&&(i=t),t&&t<i&&(i=t)}),o(i)}Object.defineProperty(t,"__esModule",{value:!0}),t.fixApiPriceFormatter=function(e){return e?("number"==typeof e&&e%1==0&&(e/=100),parseFloat(e).toFixed(2)):e},t.getMinPrice=n,t.priceCompare=function(e){return n(parseFloat(String(e.base)),e.pointPrice&&e.pointPrice.price?parseFloat(e.pointPrice.price):parseFloat(String(e.pointPrice))||0,parseFloat(String(e.finalPrice)))},t.priceFormatter=o},86:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.priceInt=n,t.priceFloat=r,t.default=function(e){var t={},i=e.proxy_linkinfo||e;t.id=i.itemID||i.itemId||i.item_i_d||i.item_id,t.title=i.itemName||i.itemTitle||i.item_name,t.sku=i.sku,t.img=i.img||i.imgpath||i.thumb_imgs&&i.thumb_imgs[0]||i.thumbImgs&&i.thumbImgs[0],t.stock=Number(i.stock),t.status=i.status,t.url=i.h5url,t.sold=Number(i.sold),i.itemTags&&(i.item_tags=i.itemTags),t.tag=i.item_tags&&i.item_tags[0]&&i.item_tags[0].images&&i.item_tags[0].images.A,t.discount=0;var s=i.discount_price||i.discountPrice||i.price_kill||i.priceKill,a=(0,o.fixApiPriceFormatter)(i.final_price||i.finalPrice||s),d=(0,o.fixApiPriceFormatter)(i.price),f=i.originPrice||d,c=i.is_point_price&&i.point_price&&(0,o.fixApiPriceFormatter)(i.point_price.price);return d=(0,o.priceCompare)({base:d,pointPrice:c,finalPrice:a}),i.point_price&&parseFloat(d)===parseFloat(c)&&parseFloat(c)!==parseFloat(a)?(t.isPointPrice=!0,f=(0,o.fixApiPriceFormatter)(i.point_price.origin_price||i.point_price.originPrice)||f):parseFloat(d)===parseFloat(s)&&(t.discount=Number(i.discount)>0&&Number(i.discount)<10?i.discount:0),f=parseFloat(f)===parseFloat(d)?void 0:Number(f).toFixed(2),t.price=Number(d).toFixed(2),t.originalPrice=f,t.priceInt=n(t.price),t.priceFloat=r(t.price),t.discount&&(t.discount=parseFloat(t.discount)),t.isDelete=i.is_delete,t};var o=i(73);function n(e){return isNaN(e)?"0":Number(e).toFixed(2).toString().split(".")[0]}function r(e){if(!isNaN(e)){var t=Number(e).toFixed(2).toString().split(".");if(t.length>1)return t[1]}return"00"}}}]);